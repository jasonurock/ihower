<?php

?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=750, user-scalable=no">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <title> </title>
    <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="js/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="js/swiper.animate1.0.3.min.js"></script>
    <script type="text/javascript" src="js/jsmpeg.min.js"></script>
    <link rel="stylesheet" href="css/swiper-bundle.css" type="text/css">
    <link rel="stylesheet" href="css/animate.min.css" type="text/css">
    <link rel="stylesheet" href="css/main.css?v=<?=rand(1,10000)?>" type="text/css"/>
</head>
<body>
<div class="container">
    <div class="step_holder step1">
        <div class="pageTitle">
            <img src="images/main/1.png" class="img"/>
        </div>
        <img src="images/main/2.png" class="ball" id="ball"/>
        <!-- Swiper -->
        <div class="swiper page cover1">
            <div class="swiper-wrapper">
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper page cover2" style="z-index: 1001;">
            <div class="swiper-wrapper">
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper page cover3">
            <div class="swiper-wrapper">
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
                <div class="swiper-slide"></div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper swiper1">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="images/main/img1-1-1.png" class="top_img img1-1 orgImg">
                    <div class="overHidden">
                        <img src="images/main/img1-1-1.png" class="top_img img1-1">
                    </div>
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img1-2-1.png" class="top_img img1-2">-->
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-3-1.png" class="top_img img1-3 orgImg">
                    <div class="overHidden">
                        <img src="images/main/img1-3-1.png" class="top_img img1-3">
                    </div>
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-4-1.png" class="top_img img1-4">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-5-1.png" class="top_img img1-5">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-6-1.png" class="top_img img1-6">
                </div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper swiper1back">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
<!--                    <img src="images/main/img1-1-1back.png" class="top_img img1-1">-->
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-2-1back.png" class="top_img img1-2">
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img1-3-1back.png" class="top_img img1-3">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img1-4-1back.png" class="top_img img1-4">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img1-5-1back.png" class="top_img img1-5">-->
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img1-6-1back.png" class="top_img img1-6">
                </div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper swiper2">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="images/main/img2-1-1.png" class="img2-1">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img2-2-1.png" class="img2-2">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img2-3-1.png" class="img2-3">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img2-4-1.png" class="img2-4">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img2-5-1.png" class="img2-5">
                </div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper swiper3back" style="height: 377px;margin-top: -85px;">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="images/main/img3-1-1back.png" class="img3-1">
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-2-1back.png" class="img3-2">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-3-1back.png" class="img3-3">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-4-1back.png" class="img3-4">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-5-1back.png" class="img3-5">-->
                </div>
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-6-1back.png" class="img3-6">-->
                </div>
            </div>
        </div>
        <!-- Swiper -->
        <div class="swiper swiper3" style="margin-top: -400px;">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
<!--                    <img src="images/main/img3-1-1.png" class="img3-1">-->
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img3-2-1.png" class="img3-2">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img3-3-1.png" class="img3-3">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img3-4-1.png" class="img3-4">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img3-5-1.png" class="img3-5">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/img3-6-1.png" class="img3-6">
                </div>
            </div>
        </div>

        <div class="selection">
            <div class="btn" onclick="javascript:changeController(1);"><img src="images/main/sort1.png"></div>
            <div class="btn" onclick="javascript:changeController(2);"><img src="images/main/sort2s.png"></div>
            <div class="btn" onclick="javascript:changeController(3);"><img src="images/main/sort3.png"></div>
        </div>
        <div class="pagination">
            <div class="swiper_pagi s1-1">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,1,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,1,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,1,3);">
                <img src="images/main/s-1-1-1.png" class="pagination_img" onclick="changeIMG(1,1,4);">
                <img src="images/main/s-1-1-2.png" class="pagination_img" onclick="changeIMG(1,1,5);">
                <img src="images/main/s-1-1-3.png" class="pagination_img" onclick="changeIMG(1,1,6);">
            </div>
            <div class="swiper_pagi s1-2">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,2,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,2,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,2,3);">
                <img src="images/main/s-1-2-1.png" class="pagination_img" onclick="changeIMG(1,2,4);">
                <img src="images/main/s-1-2-2.png" class="pagination_img" onclick="changeIMG(1,2,5);">
                <img src="images/main/s-1-2-3.png" class="pagination_img" onclick="changeIMG(1,2,6);">
            </div>
            <div class="swiper_pagi s1-3">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,3,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,3,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,3,3);">
                <img src="images/main/s-1-3-1.png" class="pagination_img" onclick="changeIMG(1,3,4);">
                <img src="images/main/s-1-3-2.png" class="pagination_img" onclick="changeIMG(1,3,5);">
                <img src="images/main/s-1-3-3.png" class="pagination_img" onclick="changeIMG(1,3,6);">
            </div>
            <div class="swiper_pagi s1-4">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,4,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,4,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,4,3);">
                <img src="images/main/s-1-4-1.png" class="pagination_img" onclick="changeIMG(1,4,4);">
                <img src="images/main/s-1-4-2.png" class="pagination_img" onclick="changeIMG(1,4,5);">
                <img src="images/main/s-1-4-3.png" class="pagination_img" onclick="changeIMG(1,4,6);">
            </div>
            <div class="swiper_pagi s1-5">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,5,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,5,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,5,3);">
                <img src="images/main/s-1-5-1.png" class="pagination_img" onclick="changeIMG(1,5,4);">
                <img src="images/main/s-1-5-2.png" class="pagination_img" onclick="changeIMG(1,5,5);">
                <img src="images/main/s-1-5-3.png" class="pagination_img" onclick="changeIMG(1,5,6);">
            </div>
            <div class="swiper_pagi s1-6">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(1,6,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(1,6,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(1,6,3);">
                <img src="images/main/s-1-6-1.png" class="pagination_img" onclick="changeIMG(1,6,4);">
                <img src="images/main/s-1-6-2.png" class="pagination_img" onclick="changeIMG(1,6,5);">
                <img src="images/main/s-1-6-3.png" class="pagination_img" onclick="changeIMG(1,6,6);">
            </div>
            <div class="swiper_pagi s2-1">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(2,1,1);">
                <img src="images/main/s-2-1-1.png" class="pagination_img" onclick="changeIMG(2,1,2);">
                <img src="images/main/s-2-1-2.png" class="pagination_img" onclick="changeIMG(2,1,3);">
                <img src="images/main/s-2-1-3.png" class="pagination_img" onclick="changeIMG(2,1,4);">
            </div>
            <div class="swiper_pagi s2-2">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(2,2,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(2,2,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(2,2,3);">
                <img src="images/main/s-2-2-1.png" class="pagination_img" onclick="changeIMG(2,2,4);">
            </div>
            <div class="swiper_pagi s2-3">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(2,3,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(2,3,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(2,3,3);">
                <img src="images/main/s-2-3-1.png" class="pagination_img" onclick="changeIMG(2,3,4);">
            </div>
            <div class="swiper_pagi s2-4">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(2,4,1);">
                <img src="images/main/s-2-4-1.png" class="pagination_img" onclick="changeIMG(2,4,2);">
                <img src="images/main/s-2-4-2.png" class="pagination_img" onclick="changeIMG(2,4,3);">
                <img src="images/main/s-2-4-3.png" class="pagination_img" onclick="changeIMG(2,4,4);">
            </div>
            <div class="swiper_pagi s2-5">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(2,5,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(2,5,2);">
                <img src="images/main/s-2-5-1.png" class="pagination_img" onclick="changeIMG(2,5,3);">
                <img src="images/main/s-2-5-2.png" class="pagination_img" onclick="changeIMG(2,5,4);">
            </div>
            <div class="swiper_pagi s3-1">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,1,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,1,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,1,3);">
                <img src="images/main/s-3-1-1.png" class="pagination_img" onclick="changeIMG(3,1,4);">
                <img src="images/main/s-3-1-2.png" class="pagination_img" onclick="changeIMG(3,1,5);">
                <img src="images/main/s-3-1-3.png" class="pagination_img" onclick="changeIMG(3,1,6);">
            </div>
            <div class="swiper_pagi s3-2">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,2,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,2,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,2,3);">
                <img src="images/main/s-3-2-1.png" class="pagination_img" onclick="changeIMG(3,2,4);">
                <img src="images/main/s-3-2-2.png" class="pagination_img" onclick="changeIMG(3,2,5);">
                <img src="images/main/s-3-2-3.png" class="pagination_img" onclick="changeIMG(3,2,6);">
            </div>
            <div class="swiper_pagi s3-3">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,3,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,3,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,3,3);">
                <img src="images/main/s-3-3-1.png" class="pagination_img" onclick="changeIMG(3,3,4);">
                <img src="images/main/s-3-3-2.png" class="pagination_img" onclick="changeIMG(3,3,5);">
                <img src="images/main/s-3-3-3.png" class="pagination_img" onclick="changeIMG(3,3,6);">
            </div>
            <div class="swiper_pagi s3-4">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,4,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,4,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,4,3);">
                <img src="images/main/s-3-4-1.png" class="pagination_img" onclick="changeIMG(3,4,4);">
                <img src="images/main/s-3-4-2.png" class="pagination_img" onclick="changeIMG(3,4,5);">
                <img src="images/main/s-3-4-3.png" class="pagination_img" onclick="changeIMG(3,4,6);">
            </div>
            <div class="swiper_pagi s3-5">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,5,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,5,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,5,3);">
                <img src="images/main/s-3-5-1.png" class="pagination_img" onclick="changeIMG(3,5,4);">
                <img src="images/main/s-3-5-2.png" class="pagination_img" onclick="changeIMG(3,5,5);">
                <img src="images/main/s-3-5-3.png" class="pagination_img" onclick="changeIMG(3,5,6);">
            </div>
            <div class="swiper_pagi s3-6">
                <img src="images/main/c1-1-1.png" class="pagination_img selected" onclick="changeIMG(3,6,1);">
                <img src="images/main/c1-1-2.png" class="pagination_img" onclick="changeIMG(3,6,2);">
                <img src="images/main/c1-1-3.png" class="pagination_img" onclick="changeIMG(3,6,3);">
                <img src="images/main/s-3-6-1.png" class="pagination_img" onclick="changeIMG(3,6,4);">
                <img src="images/main/s-3-6-2.png" class="pagination_img" onclick="changeIMG(3,6,5);">
                <img src="images/main/s-3-6-3.png" class="pagination_img" onclick="changeIMG(3,6,6);">
            </div>
        </div>
        <img src="images/main/pre.png" class="pre_btn">
        <img src="images/main/next.png" class="next_btn" onclick="step(3);">
    </div>
    <div class="step_holder step2">
        <div class="pageTitle">
            <img src="images/main/step2.png" class="img"/>
        </div>
        <div class="pre_res">
            <img src="images/main/img1-1-1.png" class="pre_topback" id="pre_topback">
            <img src="images/main/2.png" class="ball" style="top: 137px;"/>
            <img src="images/main/img1-1-1.png" class="pre_top" id="pre_top">
            <img src="images/main/img2-2-1.png" class="pre_mid" id="pre_mid">
            <img src="images/main/img3-2-1.png" class="pre_bottom" id="pre_bottom">
        </div>
        <div class="bgm_selection">
            <div class="bgm_option_holder">
                <div class="options">MUSIC 1</div>
                <div class="options">MUSIC 2</div>
                <div class="options">MUSIC 3</div>
            </div>
            <div class="music_selection" onclick="chooseBgm()">
                <div class="music_name">MUSIC SELECTION</div>
                <img src="images/main/icon1.png" class="icon1"/>
                <img src="images/main/icon2.png" class="icon2"/>
            </div>
        </div>
        <img src="images/main/pre.png" class="pre_btn" onclick="step(1);">
        <img src="images/main/next.png" class="next_btn" onclick="step(3);">
    </div>
    <div class="step_holder step3" style="background: #000000;">
        <div class="pageTitle">
            <img src="images/main/step3.png" class="img"/>
        </div>
        <!-- Swiper -->
        <div class="swiper bg_swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <img src="images/main/bg0.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg1.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg2.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg3.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg4.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg5.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg6.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg7.jpg" class="bg-pre">
                </div>
                <div class="swiper-slide">
                    <img src="images/main/bg8.jpg" class="bg-pre">
                </div>
            </div>
        </div>
        <div class="create_btn" onclick="step(4);">生成海报</div>
        <img src="images/main/pre.png" class="pre_btn" onclick="step(1);">
    </div>
    <div class="step_holder step4">
        <canvas id="myCanvas" width="750" height="1410" style="left: 100%;"></canvas>
        <div class="bill">
            <img src="images/main/bill.jpg" class="composite" style="width: 588px;opacity: 0;">
            <img src="images/main/canvasTitle1.png" id="canvasTitle" style="display: none;">
            <img src="images/main/canvasBottom1.png" id="canvasBottom" style="display: none;">
            <img src="images/main/2.jpg" id="canvasBg" style="display: none;">
        </div>
        <div class="btn_box">
            <div class="share_btn">分享</div>
            <div class="contribute_btn">投稿</div>
        </div>
        <img src="images/main/pre.png" class="pre_btn" onclick="step(3);">
    </div>
</div>

<!-- Initialize Swiper -->
<script>
    var Swiper1slideNum  = Number(2);
    var Swiper2slideNum  = Number(2);
    var Swiper3slideNum  = Number(2);
    var bgIndex = Number(1);
    var result = [[2,1],[2,1],[2,1]];
    var Swiper1 = new Swiper('.swiper1',{
        slidesPerView: 3,
        spaceBetween: 150,
        centeredSlides: true,
        // loop:true,
        initialSlide: 1,
    })
    var Swiper1back = new Swiper('.swiper1back',{
        slidesPerView: 3,
        spaceBetween: 300,
        centeredSlides: true,
        // loop:true,
        initialSlide: 1,
    })
    var Swiper2 = new Swiper('.swiper2',{
        slidesPerView: 3,
        spaceBetween: 300,
        centeredSlides: true,
        // loop:true,
        initialSlide: 1,
    })
    var Swiper3 = new Swiper('.swiper3',{
        slidesPerView: 3,
        spaceBetween: 300,
        centeredSlides: true,
        // loop:true,
        initialSlide: 1,
    })
    var Swiper3back = new Swiper('.swiper3back',{
        slidesPerView: 3,
        spaceBetween: 300,
        centeredSlides: true,
        // loop:true,
        initialSlide: 1,
    })
    var SwiperCover1 = new Swiper('.cover1',{
        controller: {
            control: [Swiper1,Swiper1back]
        },
        // loop:true,
        initialSlide: 1,
        on:{
            transitionStart: function(e){
                // $('.swiper_pagi').eq(0).find('.pagination_img').removeClass('selected');
                // $('.swiper_pagi').eq(0).find('.pagination_img').eq(e.activeIndex).addClass('selected');
                $('.swiper_pagi').fadeOut(1);
                $('.s1-'+(e.activeIndex+1)).fadeIn(1);
                Swiper1slideNum = e.activeIndex+1;
                result[0] = [e.activeIndex+1,result[2][1]];
                console.log(result);
            },
        },
    })
    var SwiperCover2 = new Swiper('.cover2',{
        controller: {
            control: Swiper2,
        },
        // loop:true,
        initialSlide: 1,
        on:{
            transitionStart: function(e){
                // $('.swiper_pagi').eq(1).find('.pagination_img').removeClass('selected');
                // $('.swiper_pagi').eq(1).find('.pagination_img').eq(e.activeIndex).addClass('selected');
                $('.swiper_pagi').fadeOut(1);
                $('.s2-'+(e.activeIndex+1)).fadeIn(1);
                Swiper2slideNum = e.activeIndex+1;
                result[1] = [e.activeIndex+1,result[2][1]];
                console.log(result);
            },
        },
    })
    var SwiperCover3 = new Swiper('.cover3',{
        controller: {
            control: [Swiper3,Swiper3back],
        },
        // loop:true,
        initialSlide: 1,
        on:{
            transitionStart: function(e){
                // $('.swiper_pagi').eq(2).find('.pagination_img').removeClass('selected');
                // $('.swiper_pagi').eq(2).find('.pagination_img').eq(e.activeIndex).addClass('selected');
                $('.swiper_pagi').fadeOut(1);
                $('.s3-'+(e.activeIndex+1)).fadeIn(1);
                Swiper3slideNum = e.activeIndex+1;
                result[2] = [e.activeIndex+1,result[2][1]];
                console.log(result);
            },
        },
    })
    var bg_swiper = new Swiper('.bg_swiper',{
        slidesPerView: 3,
        spaceBetween: 30,
        centeredSlides: true,
        loop:true,
        initialSlide: 1,
        on:{
            transitionStart: function(e){
                bgIndex = $('.bg_swiper .swiper-slide-active').attr('data-swiper-slide-index');
                console.log(bgIndex);
                $('#canvasBg').attr('src','images/main/'+bgIndex+'.jpg');
                // if(bgIndex==2) {
                //     $('#canvasTitle').attr('src', 'images/main/canvasTitle1.png');
                //     $('#canvasBottom').attr('src', 'images/main/canvasBottom1.png');
                // }else{
                //     $('#canvasTitle').attr('src', 'images/main/canvasTitle2.png');
                //     $('#canvasBottom').attr('src', 'images/main/canvasBottom2.png');
                // }
            },
        },
    })
    $(document).ready(function (e) {
        // createCanvas();
        // step(4);
        // swiper.slideTo(7, 1000, true);
        $('.cover1 .swiper-slide').append('<div class="click_box"><div class="clickTop" onclick="javascript:changeController(1);"></div><div class="clickMid" onclick="javascript:changeController(2);"></div><div class="clickBottom" onclick="javascript:changeController(3);"></div></div>')
        $('.cover2 .swiper-slide').append('<div class="click_box"><div class="clickTop" onclick="javascript:changeController(1);"></div><div class="clickMid" onclick="javascript:changeController(2);"></div><div class="clickBottom" onclick="javascript:changeController(3);"></div></div>')
        $('.cover3 .swiper-slide').append('<div class="click_box"><div class="clickTop" onclick="javascript:changeController(1);"></div><div class="clickMid" onclick="javascript:changeController(2);"></div><div class="clickBottom" onclick="javascript:changeController(3);"></div></div>')
        initSwiper();
        $('.options').click(function (e){
            $('.music_name').html($(this).html())
            $('.bgm_option_holder').slideUp();
        })
    })
    function initSwiper(){
        $('.swiper2 .swiper-slide').css({'opacity':1});
        $('.swiper1 .swiper-slide-active').css({'opacity':1});
        $('.swiper1back .swiper-slide-active').css({'opacity':1});
        $('.swiper3 .swiper-slide-active').css({'opacity':1});
        $('.swiper3back .swiper-slide-active').css({'opacity':1});
        $('.bg_swiper .swiper-slide').css({'opacity':1});
        // $('.swiper_pagi').eq(1).fadeIn(1);
        $('.s2-2').fadeIn(1);
        $('.s3-2').fadeOut(1);
    }
    function changeController(num){
        $('.page').css({'z-index':'1000'});
        $('.cover'+num).css({'z-index':'1001'});
        $('.swiper_pagi').fadeOut(1);
        // $('.swiper_pagi').eq(num-1).fadeIn(1);
        if(num==1){
            $('.s'+num+'-'+Swiper1slideNum).fadeIn(1);
        }else if(num==2){
            $('.s'+num+'-'+Swiper2slideNum).fadeIn(1);
        }else if(num==3){
            $('.s'+num+'-'+Swiper3slideNum).fadeIn(1);
        }
        $('.swiper .swiper-slide').css({'opacity':0});
        $('.swiper'+num+' .swiper-slide').css({'opacity':1});
        if(num==1){
            $('.swiper1back .swiper-slide').css({'opacity':1});
        }
        if(num==3){
            $('.swiper3back .swiper-slide').css({'opacity':1});
        }
        if(num==1){
            $('.swiper2 .swiper-slide-active').css({'opacity':1});
            $('.swiper3 .swiper-slide-active').css({'opacity':1});
            $('.swiper3back .swiper-slide-active').css({'opacity':1});
            $('.btn img').eq(0).attr('src','images/main/sort1s.png');
            $('.btn img').eq(1).attr('src','images/main/sort2.png');
            $('.btn img').eq(2).attr('src','images/main/sort3.png');
        }else if(num==2){
            $('.swiper1 .swiper-slide-active').css({'opacity':1});
            $('.swiper1back .swiper-slide-active').css({'opacity':1});
            $('.swiper3 .swiper-slide-active').css({'opacity':1});
            $('.swiper3back .swiper-slide-active').css({'opacity':1});
            $('.btn img').eq(0).attr('src','images/main/sort1.png');
            $('.btn img').eq(1).attr('src','images/main/sort2s.png');
            $('.btn img').eq(2).attr('src','images/main/sort3.png');
        }else if(num==3){
            $('.swiper1 .swiper-slide-active').css({'opacity':1});
            $('.swiper1back .swiper-slide-active').css({'opacity':1});
            $('.swiper2 .swiper-slide-active').css({'opacity':1});
            $('.btn img').eq(0).attr('src','images/main/sort1.png');
            $('.btn img').eq(1).attr('src','images/main/sort2.png');
            $('.btn img').eq(2).attr('src','images/main/sort3s.png');
        }
    }
    function turnSwiper(num,index){
        // console.log(num+'===='+index);
        if(num==1){
            SwiperCover1.slideTo(index, 1000, false);
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').removeClass('selected');
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').eq(index).addClass('selected');
        }else if(num==2){
            SwiperCover2.slideTo(index, 1000, false);
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').removeClass('selected');
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').eq(index).addClass('selected');
        }else if(num==3){
            SwiperCover3.slideTo(index, 1000, false);
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').removeClass('selected');
            // $('.swiper_pagi').eq(num-1).find('.pagination_img').eq(index).addClass('selected');
        }

    }
    function changeIMG(swiper,slide,index){
        result[swiper-1] = [slide,index];
        // console.log(result);
        if((swiper==3&&slide==1)||(swiper==1&&slide==2)){
            $('.img'+swiper+'-'+slide).attr('src','images/main/img'+swiper+'-'+slide+'-'+index+'back.png');
        }else{
            $('.img'+swiper+'-'+slide).attr('src','images/main/img'+swiper+'-'+slide+'-'+index+'.png');
        }
        if(swiper==1&&slide==6){
            $('.swiper1back .img'+swiper+'-'+slide).attr('src','images/main/img'+swiper+'-'+slide+'-'+index+'back.png');
        }
        $('.s'+swiper+'-'+slide+' .pagination_img').removeClass('selected');
        $('.s'+swiper+'-'+slide+' .pagination_img').eq(index-1).addClass('selected');
    }
    function step(num){
        $('.bg_swiper .swiper-slide').css({'opacity':1});
        if(result[2][0]==1){
            $('.pre_bottom').attr('src','images/main/img3-'+result[2][0]+'-'+result[2][1]+'back.png');
            $('.pre_bottom').css({'z-index':10})
        }else{
            $('.pre_bottom').attr('src','images/main/img3-'+result[2][0]+'-'+result[2][1]+'.png');
            $('.pre_bottom').css({'z-index':1000})
        }
        if(result[0][0]==6) {
            $('.pre_topback').attr('src', 'images/main/img1-' + result[0][0] + '-' + result[0][1] + 'back.png');
            $('.pre_top').attr('src','images/main/img1-'+result[0][0]+'-'+result[0][1]+'.png');
            $('.pre_topback').css({opacity: 1})
            $('.pre_top').css({opacity: 1})
        }else if(result[0][0]==2){
            $('.pre_topback').css({opacity: 1})
            $('.pre_top').css({opacity: 0})
            $('.pre_topback').attr('src','images/main/img1-'+result[0][0]+'-'+result[0][1]+'back.png');
        }else {
            $('.pre_topback').css({opacity:0})
            $('.pre_top').attr('src','images/main/img1-'+result[0][0]+'-'+result[0][1]+'.png');
        }
        $('.pre_mid').attr('src','images/main/img2-'+result[1][0]+'-'+result[1][1]+'.png');
        $('.step_holder').fadeOut(1);
        $('.step'+num).fadeIn(1);
        // console.log(result);
        if(num==4){
            createCanvas();
        }
    }
    function chooseBgm(){
        $('.bgm_option_holder').slideDown();
    }
    function createCanvas(){
        $('.composite').css({opacity:0});

        var c=document.getElementById("myCanvas");
        var ctx=c.getContext("2d");
        // ctx.beginPath();//创建路径
        // ctx.lineWidth = 5;//边框大写，也就是描边
        // ctx.strokeStyle = "#c2c2c2";//边框颜色
        // ctx.rect(0,0,750,1410);//透明无填充；x，y，width,height
        var bg=document.getElementById("canvasBg");
        ctx.drawImage(bg, 0, 0, 750, 1410); //背景
        // var canvasTitle=document.getElementById("canvasTitle");
        // ctx.drawImage(canvasTitle, 104, 118, 535, 114); //标题
        // var canvasBottom=document.getElementById("canvasBottom");
        // ctx.drawImage(canvasBottom, 45, 1190, 660, 177); //二维码
        var ball=document.getElementById("ball");
        if(result[2][0]==1){
            var pre_bottom=document.getElementById("pre_bottom");
            ctx.drawImage(pre_bottom, 62, 730, 632, 370); //底部
        }
        if(result[0][0]==2||result[0][0]==6){
            var pre_topback=document.getElementById("pre_topback");
            ctx.drawImage(pre_topback, 59, 295, 632, 475); //顶部
        }
        ctx.drawImage(ball, 165, 434, 436, 435); //球
        if(result[0][0]!=2) {
            var pre_top = document.getElementById("pre_top");
            ctx.drawImage(pre_top, 59, 295, 632, 475); //顶部
        }
        var pre_mid=document.getElementById("pre_mid");
        ctx.drawImage(pre_mid, 59, 483, 632, 337); //中间
        if(result[2][0]!=1){
            var pre_bottom=document.getElementById("pre_bottom");
            ctx.drawImage(pre_bottom, 62, 730, 632, 370); //底部
        }
        // <img src="images/main/img1-2.png" class="pre_top">
        //     <img src="images/main/img2-2-2.png" class="pre_mid">
        //         <img src="images/main/img3-2-back.png" class="pre_bottom">
        ctx.font="72px SimHei";
        ctx.fillStyle="#fff";
        // if(msg.length>16) {
        //     ctx.fillText(msg.substring(0,8), 60, 130) //开始绘制文本的 x/y 坐标位置（相对于画布）
        //     ctx.fillText(msg.substring(8,16), 60, 250) //开始绘制文本的 x/y 坐标位置（相对于画布）
        //     ctx.fillText(msg.substring(14, msg.length), 60, 370) //开始绘制文本的 x/y 坐标位置（相对于画布）
        // }else if(msg.length>8){
        //     ctx.fillText(msg.substring(0,8), 60, 130) //开始绘制文本的 x/y 坐标位置（相对于画布）
        //     ctx.fillText(msg.substring(8,16), 60, 250) //开始绘制文本的 x/y 坐标位置（相对于画布）
        // }else{
        //     ctx.fillText(msg, 60, 130) //开始绘制文本的 x/y 坐标位置（相对于画布）
        // }
        ctx.stroke();
        setTimeout(function (e) {
            var shareCanvas = c.toDataURL();
            // console.log(shareCanvas);
            $('.composite').attr('src',shareCanvas);
            $('.composite').animate({opacity:1},500);
        },600)
    }
</script>
</body>

</html>